let chalk,fs,ncp,path,execa,Listr,projectInstall,promisify,makeFolder,makeSlides,makeGulpfileJs,inputAssets,makeSharedJS;_b0f‍.x([["DIRECTORIES",()=>DIRECTORIES],["createProject",()=>createProject]]);_b0f‍.w("chalk",[["default",["chalk"],function(v){chalk=v}]]);_b0f‍.w("fs",[["default",["fs"],function(v){fs=v}]]);_b0f‍.w("ncp",[["default",["ncp"],function(v){ncp=v}]]);_b0f‍.w("path",[["default",["path"],function(v){path=v}]]);_b0f‍.w("execa",[["default",["execa"],function(v){execa=v}]]);_b0f‍.w("listr",[["default",["Listr"],function(v){Listr=v}]]);_b0f‍.w("pkg-install",[["projectInstall",["projectInstall"],function(v){projectInstall=v}]]);_b0f‍.w("util",[["promisify",["promisify"],function(v){promisify=v}]]);_b0f‍.w("./tasks/makeFolder",[["*",null,function(v){makeFolder=v}]]);_b0f‍.w("./tasks/makeSlides",[["makeSlides",["makeSlides"],function(v){makeSlides=v}]]);_b0f‍.w("./tasks/makeGulpfile",[["makeGulpfileJs",["makeGulpfileJs"],function(v){makeGulpfileJs=v}]]);_b0f‍.w("./tasks/inputAssets",[["inputAssets",["inputAssets"],function(v){inputAssets=v}]]);_b0f‍.w("./tasks/makeSharedJs",[["makeSharedJS",["makeSharedJS"],function(v){makeSharedJS=v}]]);
























const access = _b0f‍.a("promisify",promisify)(_b0f‍.a("fs",fs).access);
const copy = _b0f‍.a("promisify",promisify)(_b0f‍.a("ncp",ncp));

       let DIRECTORIES = {
	rootDir: '',
	presentationDir: ''
};;_b0f‍.j(["DIRECTORIES"]);


const initGit = async options => {
	const result = await _b0f‍.a("execa",execa)('git', ['init'], {
		cwd: options.targetDirectory,
	});
	if (result.failed) {
		return Promise.reject(new Error('Faild to initalize Git'))
	}
	return;
}

const copyGeneralFile = async options => {
	return copy(options.templateDirectory, options.targetDirectory);
}

//make main createProject
       async function createProject(options) {
	options = {
		...options,
		targetDirectory: options.targetDirectory || `${process.cwd()}/${options.rootFolder}`
	};

	const currentUrl = `${process.cwd()}/${options.rootFolder}`;
	const currentFileUrl =
		_b0f‍._.meta.url; // file:///Users/gim-yohan/Projects/Veeva_CLM-boilerplate_3.0/src/main.js
	const templateDir = _b0f‍.a("path",path).resolve(
		new URL(currentFileUrl).pathname, // /Users/gim-yohan/Projects/Veeva_CLM-boilerplate_3.0/src/main.js
		'../../templates'
	);
	options.templateDirectory = templateDir;
	try {
		await access(currentUrl, _b0f‍.a("fs",fs).constants.R_OK);
	} catch (err) {
		if (err.code === 'EEXIST') {
			_b0f‍.g.console.log('%s Project is already exist or Duplicate', _b0f‍.a("chalk",chalk).red.bold('ERROR'));
			process.exit(1);
		}
	}
	_b0f‍.a("fs",fs).mkdirSync(currentUrl);
	_b0f‍.u(_b0f‍.u(DIRECTORIES = {
		rootDir: `${process.cwd()}/${options.rootFolder}`,
		presentationDir: `${process.cwd()}/${options.rootFolder}/${options.presentation}`
	}));

	const tasks = new (_b0f‍.a("Listr",Listr))([{
			title: 'Make Root Folder & Sub presentation Folder',
			task: () => {
				makeFolder.makeRootFolder(options);
				makeFolder.makeSubPresnetationFolder(options)
			}
		},
		{
			title: "Copy General files",
			task: () => copyGeneralFile(options),
		},
		{
			title: "Make Gulpfile.js",
			task: () => _b0f‍.a("makeGulpfileJs",makeGulpfileJs)(options),
		},
		{
			title: "Make Slides Folders",
			task: () => _b0f‍.a("makeSlides",makeSlides)(options),
		},
		{
			title: "Input Assets(Html, Css, Js basic setting)",
			task: () => _b0f‍.a("inputAssets",inputAssets)(options),
		},
		{
			title: "Make shared folder inside js, ex)config.js, mt.js)",
			task: () => _b0f‍.a("makeSharedJS",makeSharedJS)(options),
		},
		{
			title: 'Initalize git',
			task: () => initGit(options),
		}, {
			title: 'Install dependencies',
			task: () => _b0f‍.a("projectInstall",projectInstall)({
				cwd: options.targetDirectory
			}),
			skip: () => !options.runInstall ? 'Pass -- install to automatically install dependencies' : undefined
		},
	])

	await tasks.run();
	_b0f‍.g.console.log('%s Project ready', _b0f‍.a("chalk",chalk).greenBright.bold('Done'));
	return true;
}